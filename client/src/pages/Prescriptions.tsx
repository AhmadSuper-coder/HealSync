import { useState } from \"react\";\nimport { PrescriptionForm } from \"@/components/PrescriptionForm\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Plus, Eye, Print, Send } from \"lucide-react\";\n\ninterface Prescription {\n  id: string;\n  patientName: string;\n  date: string;\n  medicineCount: number;\n  status: \"active\" | \"completed\" | \"expired\";\n}\n\n// todo: remove mock functionality\nconst mockPrescriptions: Prescription[] = [\n  {\n    id: \"1\",\n    patientName: \"Rajesh Sharma\",\n    date: \"2024-01-15\",\n    medicineCount: 3,\n    status: \"active\",\n  },\n  {\n    id: \"2\",\n    patientName: \"Priya Patel\",\n    date: \"2024-01-10\",\n    medicineCount: 2,\n    status: \"completed\",\n  },\n  {\n    id: \"3\",\n    patientName: \"Amit Kumar\",\n    date: \"2023-12-20\",\n    medicineCount: 4,\n    status: \"expired\",\n  },\n];\n\nexport default function Prescriptions() {\n  const [activeTab, setActiveTab] = useState(\"list\");\n\n  const handleViewPrescription = (prescription: Prescription) => {\n    console.log('View prescription:', prescription.id);\n  };\n\n  const handlePrintPrescription = (prescription: Prescription) => {\n    console.log('Print prescription:', prescription.id);\n  };\n\n  const handleSendPrescription = (prescription: Prescription) => {\n    console.log('Send prescription via WhatsApp/Email:', prescription.id);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return \"default\";\n      case \"completed\":\n        return \"secondary\";\n      case \"expired\":\n        return \"destructive\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Prescription Management</h1>\n          <p className=\"text-muted-foreground\">\n            Create, manage, and track patient prescriptions.\n          </p>\n        </div>\n        <Button\n          onClick={() => setActiveTab(\"create\")}\n          data-testid=\"button-new-prescription\"\n        >\n          <Plus className=\"mr-2 h-4 w-4\" />\n          New Prescription\n        </Button>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList>\n          <TabsTrigger value=\"list\" data-testid=\"tab-prescription-list\">Prescription History</TabsTrigger>\n          <TabsTrigger value=\"create\" data-testid=\"tab-create-prescription\">Create New</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"list\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Prescription History</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Patient Name</TableHead>\n                      <TableHead>Date</TableHead>\n                      <TableHead>Medicines</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {mockPrescriptions.map((prescription) => (\n                      <TableRow key={prescription.id}>\n                        <TableCell className=\"font-medium\">\n                          {prescription.patientName}\n                        </TableCell>\n                        <TableCell>{prescription.date}</TableCell>\n                        <TableCell>{prescription.medicineCount} medicines</TableCell>\n                        <TableCell>\n                          <Badge \n                            variant={getStatusColor(prescription.status) as any}\n                            data-testid={`badge-status-${prescription.id}`}\n                          >\n                            {prescription.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex justify-end gap-2\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleViewPrescription(prescription)}\n                              data-testid={`button-view-${prescription.id}`}\n                            >\n                              <Eye className=\"h-4 w-4\" />\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handlePrintPrescription(prescription)}\n                              data-testid={`button-print-${prescription.id}`}\n                            >\n                              <Print className=\"h-4 w-4\" />\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleSendPrescription(prescription)}\n                              data-testid={`button-send-${prescription.id}`}\n                            >\n                              <Send className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"create\" className=\"space-y-6\">\n          <PrescriptionForm onSubmit={(data) => {\n            console.log('Prescription created:', data);\n            setActiveTab(\"list\");\n          }} />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n